<!-- transfer.component.html -->
<div class="min-h-screen bg-background text-text">
  <app-header></app-header>
  <div class="h-[60px]"></div>

  <!-- Header -->
  <div class="relative bg-background pb-6">
    <div class="flex items-center justify-between px-6 pb-6">
      <a [routerLink]="['/payments']" class="text-primary text-lg font-normal">Закрыть</a>
      <h1 class="text-xl font-bold text-white text-center flex-1">Перевод по номеру счета</h1>
      <div class="w-16"></div>
    </div>
  </div>

  <app-card-slider
    [cards]="sliderCards()"
    [(selectedCardIndex)]="selectedCardIndex">
  </app-card-slider>

  <div class="mx-6">
    <div class="bg-background-level2 rounded-xl p-4">
      <input [(ngModel)]="cardNumber" type="text" placeholder="Введите номер счета"
             class="w-full bg-transparent text-white text-lg placeholder-text-second border-none outline-none" />
    </div>
  </div>

  <app-amount-input
    [customAmount]="customAmount"
    (customAmountChange)="customAmount = $event">
  </app-amount-input>

  <div class="mx-6 mb-6">
    <div class="bg-background-level2 rounded-2xl p-4 relative">
      <textarea [(ngModel)]="message" maxlength="40"
                placeholder="Сообщение получателю"
                class="w-full bg-transparent text-white text-lg placeholder-text-second border-none outline-none resize-none h-16"></textarea>
      <div class="absolute bottom-4 right-4 text-text-second text-sm">
        {{ message.length }}/40
      </div>
    </div>
  </div>

  <!-- Кнопка -->
  <div class="mx-6 mb-6">
    <button
      (click)="submitTransfer()"
      [disabled]="pending() || !canSubmit"
      class="w-full bg-primary hover:bg-[#A58BBE] text-white rounded-2xl h-16 text-xl border-none disabled:opacity-40">
      {{ pending() ? 'Отправка…' : 'Перевести' }}
    </button>
  </div>

  <div class="h-20"></div>
</div>

<div *ngIf="error()" class="fixed inset-0 bg-black/60 flex items-center justify-center z-50">
  <div class="bg-background-level2 p-6 rounded-2xl text-white w-[80%] max-w-md shadow-lg">
    <h2 class="text-lg font-bold mb-4">Ошибка</h2>
    <p class="text-sm mb-6 text-text-second">{{ error() }}</p>
    <button (click)="clearError()"
            class="w-full bg-primary text-white rounded-xl h-12 text-base">
      Понял
    </button>
  </div>
</div>
