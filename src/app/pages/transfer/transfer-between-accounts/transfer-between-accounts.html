<!-- transfer.component.html -->
<div class="min-h-screen bg-background text-text"
     (pointerdown)="onBackdropPointer($event)">
  <app-header></app-header>
  <div class="h-[60px]"></div>

  <!-- Header -->
  <div class="relative bg-background pb-6">
    <div class="flex items-center justify-between px-6 pb-6">
      <a [routerLink]="['/payments']" class="text-primary text-lg font-normal">Закрыть</a>
      <h1 class="text-xl font-bold text-white text-center flex-1">Перевод между счетами</h1>
      <div class="w-16"></div>
    </div>
  </div>

  <app-card-slider
    [cards]="sliderCards()"
    [(selectedCardIndex)]="fromCardIndex">
  </app-card-slider>

  <app-card-slider
    [cards]="sliderCards()"
    [(selectedCardIndex)]="toCardIndex">
  </app-card-slider>

  <app-amount-input
    [customAmount]="customAmount"
    (customAmountChange)="customAmount = $event">
  </app-amount-input>

  <div class="mx-6 mb-6">
    <button
      (click)="submitTransfer()"
      [disabled]="pending() || !canSubmit"
      class="w-full bg-primary hover:bg-[#A58BBE] text-white rounded-2xl h-16 text-xl border-none disabled:opacity-40">
      {{ pending() ? 'Отправка…' : 'Перевести' }}
    </button>
  </div>

  <div class="h-20"></div>
</div>

<div *ngIf="error()" class="fixed inset-0 bg-black/60 flex items-center justify-center z-50">
  <div class="bg-background-level2 p-6 rounded-2xl text-white w-[80%] max-w-md shadow-lg">
    <h2 class="text-lg font-bold mb-4">Ошибка</h2>
    <p class="text-sm mb-6 text-text-second">{{ error() }}</p>
    <button (click)="clearError()"
            class="w-full bg-primary text-white rounded-xl h-12 text-base">
      Понял
    </button>
  </div>
</div>
