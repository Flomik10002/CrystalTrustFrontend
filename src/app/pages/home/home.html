<div class="min-h-screen bg-background text-text">
  <app-header></app-header>
  <div class=" bg-background-level1 h-[30px]"></div>
  <div class="bg-background-level1 rounded-b-40">
    <div class="flex items-center pt-space-30 pb-space-20 px-4">
      <div class="h-10 w-10 border-2 border-primary rounded-full overflow-hidden">
        <img [src]="avatarUrl" alt="avatar" class="w-full h-full object-cover" />
      </div>
      <div class="ml-2">
        <h2 class="text-b font-bold">{{ nickname }}</h2>
      </div>
    </div>

    <div
      #stories
      class="flex gap-3 pb-space-20 pt-space-10 pl-space-20 pr-space-20 overflow-x-auto cursor-grab select-none"
      (pointerdown)="onStoriesDown($event)"
      (pointermove)="onStoriesMove($event)"
      (pointerup)="onStoriesUp($event)"
      (pointercancel)="onStoriesUp($event)"
      (pointerleave)="onStoriesUp($event)"
      style="touch-action: auto; -webkit-overflow-scrolling: touch;"
    >
      <app-story-card color="bg-purple-500"></app-story-card>
      <app-story-card color="bg-slate-600"></app-story-card>
      <app-story-card color="bg-amber-200"></app-story-card>
      <app-story-card color="bg-slate-400"></app-story-card>
    </div>

    <div class="text-center text-text-second text-sm pb-space-10">
      Лента событий
    </div>
  </div>

  <app-operations-summary
    *ngIf="!loading"
    [total]="summaryTotal"
    [monthLabel]="summaryMonth"
    [entries]="summaryEntries"
  ></app-operations-summary>



  <div class="mx-6 mt-6 grid grid-cols-2 gap-4 text-center text-text-second text-xs">
    <div class="flex flex-col items-center">
      <button [routerLink]="['/transfer/by-username']"
              class="w-full h-12 rounded-2xl bg-background-level1 hover:bg-background-level2 flex items-center justify-center">
        <svg class="h-6 w-6 text-primary" fill="none" stroke="currentColor" viewBox="0 0 86 85">
          <path d="M55.5175 48.75V30M55.5175 30H36.6723M55.5175 30L30.3914 54.9996M80.6444 42.5C80.6444 63.2108 63.77 80 42.954 80C22.1382 80 5.26367 63.2108 5.26367 42.5C5.26367 21.7893 22.1382 5 42.954 5C63.77 5 80.6444 21.7893 80.6444 42.5Z" stroke="#9F7AEA" stroke-width="9" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
      <span class="mt-2 leading-tight">Перевести<br />по никнейму</span>
    </div>
    <div class="flex flex-col items-center">
      <button [routerLink]="['/business/info-business']"
        class="w-full h-12 rounded-2xl bg-background-level1 hover:bg-background-level2 flex items-center justify-center">
        <svg class="h-6 w-6 text-primary" viewBox="0 0 87 75" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M68.2197 0C74.7785 8.2881e-05 80.4002 4.45318 81.8057 10.5469L86.7246 29.2969C87.1599 30.9037 87.0771 32.607 86.4883 34.1641C85.8994 35.7212 84.8347 37.0527 83.4453 37.9688L82.5088 38.6719C81.3629 39.3802 80.0895 39.8579 78.7607 40.0781V65.625C78.7533 68.1091 77.7634 70.4895 76.0078 72.2461C74.2523 74.0025 71.8733 74.9926 69.3906 75H60.4893C58.0066 74.9925 55.6276 74.0026 53.8721 72.2461C52.1165 70.4895 51.1275 68.1091 51.1201 65.625V56.25H38.2363V65.625C38.2289 68.1091 37.2398 70.4896 35.4844 72.2461C33.7289 74.0025 31.3497 74.9925 28.8672 75H17.8574C15.3748 74.9926 12.9958 74.0025 11.2402 72.2461C9.48468 70.4895 8.49472 68.1091 8.4873 65.625V40.0781C7.08208 39.8437 5.91108 39.1405 4.50586 38.4375L3.56836 37.7344C0.7575 35.8594 -0.647898 32.5781 0.289062 29.2969L5.20801 10.5469C6.03922 7.51706 7.84208 4.84387 10.3389 2.93848C12.8355 1.03325 15.8884 0.00091302 19.0283 0H68.2197ZM43.8584 36.6787C41.8493 36.6787 39.8878 37.2926 38.2363 38.4375C36.585 39.5822 34.6232 40.1953 32.6143 40.1953C30.6055 40.1952 28.6444 39.5821 26.9932 38.4375C24.1822 36.7969 20.9026 36.3281 17.8574 37.5V65.625H28.8672V56.25C28.8746 53.766 29.8637 51.3854 31.6191 49.6289C33.3746 47.8724 35.7537 46.8825 38.2363 46.875H51.1201C53.6028 46.8825 55.9818 47.8724 57.7373 49.6289C59.4927 51.3854 60.4818 53.766 60.4893 56.25V65.625H69.8594V37.5C68.3763 36.8958 66.7677 36.6647 65.1748 36.8281C63.5819 36.9916 62.0532 37.5447 60.7236 38.4375C59.0724 39.5821 57.1113 40.1952 55.1025 40.1953C53.0936 40.1953 51.1318 39.5822 49.4805 38.4375C47.829 37.2926 45.8675 36.6787 43.8584 36.6787ZM19.0283 9.375C16.6861 9.37509 14.8123 10.7815 14.3438 12.8906L9.89355 30.7031C9.93452 30.7574 9.98706 30.8017 10.0479 30.832C10.1087 30.8624 10.1761 30.8779 10.2441 30.8779C10.3122 30.8779 10.3795 30.8624 10.4404 30.832C10.5014 30.8017 10.5546 30.7575 10.5957 30.7031C13.7685 28.5279 17.5249 27.3643 21.3711 27.3643C25.2172 27.3643 28.9737 28.5279 32.1465 30.7031C32.1875 30.7575 32.2408 30.8017 32.3018 30.832C32.3625 30.8622 32.4292 30.8779 32.4971 30.8779C32.5651 30.8779 32.6325 30.8623 32.6934 30.832C32.7543 30.8017 32.8076 30.7575 32.8486 30.7031C36.0214 28.5279 39.7779 27.3643 43.624 27.3643C47.4702 27.3643 51.2266 28.5279 54.3994 30.7031C54.4405 30.7575 54.4937 30.8017 54.5547 30.832C54.6156 30.8623 54.6829 30.8779 54.751 30.8779C54.819 30.8779 54.8864 30.8623 54.9473 30.832C55.008 30.8017 55.0606 30.7574 55.1016 30.7031C58.2743 28.5279 62.0309 27.3643 65.877 27.3643C69.7231 27.3643 73.4796 28.5279 76.6523 30.7031C76.8866 30.9375 77.3555 30.7031 77.3555 30.7031L72.9043 12.8906C72.6753 11.8843 72.1094 10.9862 71.2998 10.3467C70.4902 9.70712 69.4856 9.36431 68.4541 9.375H19.0283Z" fill="#9F7AEA"/>
        </svg>
      </button>
      <span class="mt-2 leading-tight">Открыть<br />бизнес-счет</span>
    </div>
  </div>

  <ng-container *ngIf="!loading">
    <app-account-card
      *ngFor="let acc of accounts"
      [type]="acc.type"
      [balance]="acc.balance"
      [title]="acc.type === 'personal'
          ? 'Личный счёт'
          : (acc.business?.name ?? 'Бизнес')"
      [number]="acc.id">
    </app-account-card>
  </ng-container>


  <div class="fixed -bottom-1 left-0 right-0 bg-background-level2/40 backdrop-blur-xl z-50">
    <div class="flex justify-around items-center py-6">

      <a
        class="flex flex-col items-center gap-1 text-primary">
        <svg class="h-6 w-6 transition-colors" fill="none" viewBox="0 0 79 84">
          <path d="M24.2857 80H14.1429C8.54111 80 4 75.6041 4 70.1811V35.4219C4 32.5553 5.29387 29.8321 7.54199 27.9667L32.899 6.92632C36.6975 3.77456 42.3025 3.77456 46.101 6.92632L71.4581 27.9667C73.7063 29.8321 75 32.5553 75 35.4219V70.1811C75 75.6041 70.459 80 64.8571 80H54.7143M24.2857 80V50.5434C24.2857 47.832 26.5563 45.634 29.3571 45.634H49.6429C52.4438 45.634 54.7143 47.832 54.7143 50.5434V80M24.2857 80H54.7143" stroke="#9F7AEA" stroke-width="8" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span class="text-xs transition-colors">Главная</span>
      </a>

      <!-- Платежи -->
      <a
        [routerLink]="'/payments'"
        routerLinkActive="text-primary fill-primary"
        class="flex flex-col items-center gap-1 text-text-second">
        <svg class="h-6 w-6 transition-colors" fill="currentColor" viewBox="0 0 80 80">
          <path d="M39.979 0C59.8876 0 77.0108 14.1228 79.6919 34.9355C81.256 47.0794 76.7715 59.8008 68.0639 68.3984C60.7321 75.6376 50.5356 79.9007 40.2368 80C40.0653 80.0005 39.8936 80.0005 39.7221 80C24.5671 79.854 10.1076 70.4498 3.70554 56.8389C-1.23949 46.3253 -1.23086 33.6558 3.70554 23.1611C10.1533 9.45326 24.8543 0.000103759 39.979 0ZM52.4057 11.6426C41.0892 6.90818 27.4784 9.70667 18.8178 18.0586C11.4013 25.211 7.84096 36.1106 9.72702 46.1826C12.4022 60.4683 25.8578 71.6111 40.2798 71.75C40.4136 71.7505 40.5473 71.7505 40.6811 71.75C48.9978 71.6698 57.0621 68.1572 62.812 62.2764C69.3676 55.5712 72.7033 45.8373 71.5063 36.5498C70.1097 25.7139 62.5319 15.8792 52.4057 11.6426ZM40.4995 16C53.4782 16 63.9995 26.5213 63.9995 39.5C63.9995 52.4787 53.4782 63 40.4995 63C27.5209 62.9999 16.9995 52.4786 16.9995 39.5C16.9995 26.5214 27.5209 16.0001 40.4995 16Z" fill="#656565"/>
        </svg>
        <span class="text-xs">Платежи</span>
      </a>

      <!-- Прочее -->
      <a
        [routerLink]="'/settings'"
        routerLinkActive="text-primary fill-primary"
        class="flex flex-col items-center gap-1 text-text-second">
        <svg class="h-6 w-6 transition-colors" fill="currentColor" viewBox="0 0 85 85">
          <path d="M1.85056 46.9705C-0.617057 44.5026 -0.616824 40.5015 1.85108 38.0339L14.363 25.5235C16.8309 23.0558 20.8319 23.0561 23.2996 25.524L35.81 38.0359C38.2776 40.5038 38.2774 44.5048 35.8095 46.9725L23.2976 59.4829C20.8297 61.9505 16.8286 61.9503 14.361 59.4824L1.85056 46.9705Z" fill="#656565"/>
          <path d="M25.5172 70.637C23.0496 68.1691 23.0498 64.168 25.5177 61.7004L38.0296 49.19C40.4975 46.7224 44.4986 46.7226 46.9662 49.1905L59.4767 61.7024C61.9443 64.1703 61.944 68.1714 59.4761 70.639L46.9642 83.1494C44.4963 85.617 40.4953 85.6168 38.0277 83.1489L25.5172 70.637Z" fill="#656565"/>
          <path d="M25.5109 23.2976C23.0433 20.8297 23.0435 16.8286 25.5114 14.361L38.0233 1.85056C40.4913 -0.617057 44.4923 -0.616824 46.9599 1.85108L59.4704 14.363C61.938 16.8309 61.9377 20.8319 59.4698 23.2996L46.9579 35.81C44.49 38.2776 40.489 38.2774 38.0214 35.8095L25.5109 23.2976Z" fill="#656565"/>
          <path d="M49.1837 46.9705C46.7161 44.5026 46.7163 40.5015 49.1842 38.0339L61.6962 25.5235C64.1641 23.0558 68.1651 23.0561 70.6327 25.524L83.1432 38.0359C85.6108 40.5038 85.6106 44.5048 83.1427 46.9725L70.6307 59.4829C68.1628 61.9505 64.1618 61.9503 61.6942 59.4824L49.1837 46.9705Z" fill="#656565"/>
        </svg>
        <span class="text-xs">Прочее</span>
      </a>

    </div>
  </div>

  <div class="h-[130px]"></div>

</div>
